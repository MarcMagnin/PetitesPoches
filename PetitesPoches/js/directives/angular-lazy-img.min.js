angular.module("angularLazyImg",[]);angular.module("angularLazyImg").factory("LazyImgMagic",["$rootScope","$window","lazyImgConfig","lazyImgHelpers",function(n,t,i,r){"use strict";function y(){for(var t,n=0;n<f;n++)t=o[n],r.isElementInView(t.$elem[0],u.offset,c)&&(k(t),w(n),n--);f===0&&l()}function p(n){console.log("LISTENING");var t=document.querySelector("#Container");u.container=angular.element(t);console.log(u.container);(u.container||e)[n]("scroll",h);(u.container||e)[n]("touchmove",h);e[n]("resize",h);e[n]("resize",v)}function b(){s=!0;setTimeout(function(){y();p("on")},1)}function l(){s=!1;p("off")}function w(n){o.splice(n,1);f--}function k(n){var t=new Image;t.onerror=function(){u.errorClass&&n.$elem.addClass(u.errorClass);u.onError(n)};t.onload=function(){d(n.$elem,n.src);u.successClass&&n.$elem.addClass(u.successClass);u.onSuccess(n)};t.src=n.src}function d(n,t){n[0].nodeName.toLowerCase()==="img"?n[0].src=t:n.css("background-image",'url("'+t+'")')}function a(n){this.$elem=n}var c,e,o,f,s,u,h,v;return o=[],f=0,s=!1,u=i.getOptions(),e=angular.element(t),c=r.getWinDimensions(),v=r.throttle(function(){c=r.getWinDimensions()},60),n.$on("tabChanged",function(){console.log("hey");s&&l()}),h=r.throttle(y,30),a.prototype.setSource=function(n){this.src=n;o.push(this);f++;s||b()},a.prototype.removeImage=function(){var n=o.indexOf(this);w(n);f===0&&l()},a}]);angular.module("angularLazyImg").provider("lazyImgConfig",function(){"use strict";this.options={offset:100,errorClass:null,successClass:null,onError:function(){},onSuccess:function(){}};this.$get=function(){var n=this.options;return{getOptions:function(){return n}}};this.setOptions=function(n){angular.extend(this.options,n)}});angular.module("angularLazyImg").factory("lazyImgHelpers",["$window",function(n){"use strict";function t(){return{height:n.innerHeight,width:n.innerWidth}}function i(n,t,i){var r=n.getBoundingClientRect(),u=i.height+t;return r.left>=0&&r.right<=i.width+t&&(r.top>=0&&r.top<=u||r.bottom<=u&&r.bottom>=0-t)}function r(n,t,i){var r,u;return function(){var e=i||this,f=+new Date,o=arguments;r&&f<r+t?(clearTimeout(u),u=setTimeout(function(){r=f;n.apply(e,o)},t)):(r=f,n.apply(e,o))}}return{isElementInView:i,getWinDimensions:t,throttle:r}}]);angular.module("angularLazyImg").directive("lazyImg",["LazyImgMagic",function(n){"use strict";function t(t,i,r){var u=new n(i);r.$observe("lazyImg",function(n){n&&u.setSource(n)});t.$on("$destroy",function(){u.removeImage()})}return{link:t,restrict:"A"}}]);
//# sourceMappingURL=angular-lazy-img.min.js.map
